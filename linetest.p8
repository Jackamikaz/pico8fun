pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
#include quadfill.lua

function _init()
  poke(0x5f2d, 1)
  points = {{32,32},{96,32},{96,96},{32,96}}
  cols = {8,11,12,10}
  curpoint = 1
  lastmousedown = false
end

function updatemousebutton()
  lastmousedown = curmousedown
  curmousedown = stat(34) & 1 != 0
end

function mousepressed()
  return not lastmousedown and curmousedown
end

function ismousedown()
  return curmousedown
end

function _draw()
  cls()

  updatemousebutton()
  local mx, my = stat(32), stat(33)

  if mousepressed() then
    curpoint = nil
    for j = 1,4 do
      local dx, dy = points[j][1] - mx, points[j][2] - my
      if dx*dx + dy*dy < 9 then
        curpoint = j
        break
      end
    end
  end

  if ismousedown() and curpoint then
    local curp = points[curpoint]
    curp[1] = mx
    curp[2] = my
  end

  local p1 = points[1]
  local p2 = points[2]
  local p3 = points[3]
  local p4 = points[4]

  quadfill(p1[1],p1[2],p2[1],p2[2],p3[1],p3[2],p4[1],p4[2],1)

  for i=1,4 do
    local p = points[i]
    circ(p[1], p[2], 2, cols[i])
  end

  spr(1,mx,my)
end

__gfx__
00000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700676000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000677600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000677760000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700676000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000600600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
